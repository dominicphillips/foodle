// Generated by CoffeeScript 1.6.3
App.DishView = App.BaseView.extend({
  className: 'item',
  template: App.templates['dishes/dish'],
  events: {
    'click .tile': 'onClickTile'
  },
  onClickTile: function(e) {
    var $target;
    $target = $(e.currentTarget);
    if ($target.hasClass('maps')) {
      App.appView.showModal(new App.MapsView({
        model: this.model
      }));
    }
    if ($target.hasClass('vote')) {
      App.appView.showModal(new App.VoteView({
        model: this.model
      }));
    }
    if ($target.hasClass('comment')) {
      return App.appView.showModal(new App.CommentView({
        model: this.model
      }));
    }
  },
  onAfterRender: function() {
    var indicator, percent, score;
    score = this.model.get('health_score');
    percent = score * 100 / 5;
    indicator = 'success';
    if (percent < 50) {
      indicator = 'danger';
    }
    return this.$el.find('.bar').css({
      width: percent + '%'
    }).addClass('bar-' + indicator);
  }
});
